#/usr/bin/bash
# available tag names = amr_simulation, base_image, base_image_yolo

# stop and remove old container
docker stop amr_simulation_container 2>/dev/null || true
docker rm amr_simulation_container 2>/dev/null || true

xhost +local:root 
docker run -it --network='host' \
-p 80:80 \
-p 9090:9090 \
--env='DISPLAY' \
--env='QT_X11_NO_MITSHM=1' \
--env='XDG_RUNTIME_DIR=/run/user/${UID}' \
--volume='/tmp/.X11-unix:/tmp/.X11-unix:rw' \
--volume='/home/mr_robot/Desktop/Git/rom_dynamics_robots/packages_rom_sdk/rom_msgs/rom_dynamics_app/build:/home/mr_robot/rom_dynamics_app' \
--volume='/home/mr_robot/Desktop/Git/rom_dynamics_robots/packages_rom_sdk/ros_flutter_gui_web_build:/home/mr_robot/ros_flutter_gui_app_web' \
--name amr_simulation_container \
romrobotics/humble_production:amr_simulation bash
docker stop amr_simulation_container docker rm amr_simulation_container

# cleanup after exit
docker stop amr_simulation_container
docker rm amr_simulation_container
